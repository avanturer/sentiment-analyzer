# Анализатор тональности текста

## Описание проекта

Демонстрационный прототип программного приложения для анализа тональности текстов с использованием нескольких современных ИИ-сервисов. Приложение выполняет сравнительный анализ качества работы различных API для обработки естественного языка.

**Направление подготовки:** 01.03.04 Прикладная математика  
**Кафедра:** Инженерной кибернетики НИТУ МИСиС  
**Дисциплина:** Экспертные и рекомендательные системы  
**Лабораторная работа:** №1

## Быстрый запуск

1. Создайте виртуальное окружение: `python -m venv venv`
2. Активируйте его: `source venv/bin/activate` (Linux/Mac) или `venv\Scripts\activate` (Windows)
3. Установите зависимости: `pip install -r requirements.txt`
4. Запустите приложение: `python app.py`
5. Откройте в браузере: `http://localhost:5000`

## Настройка API ключей

Для работы приложения требуется бесплатный API ключ от Hugging Face:

1. Зарегистрируйтесь на https://huggingface.co/
2. Перейдите в Settings → Access Tokens
3. Создайте новый токен (тип: Read)
4. Скопируйте токен и добавьте в файл `.env`:
   ```
   HUGGINGFACE_API_KEY=ваш_токен_здесь
   ```

## Функциональные возможности

### Основной функционал

1. **Анализ тональности текста** — определение эмоциональной окраски (положительная, отрицательная, нейтральная)
2. **Интеграция с ИИ-сервисами:**
   - Hugging Face RuBERT Sentiment Analysis
   - Hugging Face RuBERT Tiny Sentiment Analysis
3. **Сравнительный анализ** — оценка согласованности результатов разных сервисов
4. **Веб-интерфейс** — графический интерфейс на базе Bootstrap 5

### Технические характеристики

- **Входные данные:** Текстовая информация (до 5000 символов)
- **Выходные данные:** 
  - Тональность текста (ПОЛОЖИТЕЛЬНАЯ/ОТРИЦАТЕЛЬНАЯ/НЕЙТРАЛЬНАЯ)
  - Уровень уверенности (confidence score)
  - Уровень согласия между сервисами
  - Средняя уверенность
- **Язык интерфейса:** Русский

## Требования к окружению

- Python 3.8+
- pip (менеджер пакетов Python)
- Современный веб-браузер

## Установка и запуск

### 1. Клонирование репозитория

```bash
git clone <url_репозитория>
cd sentiment-analyzer
```

### 2. Создание виртуального окружения

```bash
python -m venv venv
```

На Windows:
```bash
venv\Scripts\activate
```

На macOS/Linux:
```bash
source venv/bin/activate
```

### 3. Установка зависимостей

```bash
pip install -r requirements.txt
```

### 4. Конфигурация API ключей

Создайте файл `.env` на основе `env_example.txt`:

```bash
cp env_example.txt .env
```

Откройте `.env` и добавьте токен Hugging Face:

```env
HUGGINGFACE_API_KEY=ваш_токен_здесь
```

Получение токена описано в разделе "Настройка API ключей" выше.

### 5. Запуск приложения

```bash
python app.py
```

Приложение запустится по адресу: `http://localhost:5000`

## Структура проекта

```
sentiment-analyzer/
├── app.py
├── config.py
├── utils.py
├── test_api.py
├── requirements.txt
├── env_example.txt
├── README.md
├── templates/
│   ├── base.html
│   └── index.html
└── static/
    ├── css/
    │   └── style.css
    └── js/
        └── script.js
```

## Архитектура приложения

Backend на Python + Flask обрабатывает запросы к Hugging Face API. Frontend на HTML/CSS/JavaScript обеспечивает интерактивный интерфейс. Используются две русскоязычные модели Hugging Face: RuBERT и RuBERT Tiny для анализа тональности русских текстов.

## API Endpoints

- `POST /api/analyze` - анализ текста с использованием обоих ИИ-сервисов
- `GET /api/demo` - примеры текстов для демонстрации
- `GET /api/status` - статус доступности ИИ-сервисов

## Результаты сравнительного анализа

Приложение нормализует результаты разных сервисов, определяет уровень согласия (ВЫСОКОЕ, СРЕДНЕЕ, НИЗКОЕ) и рассчитывает среднюю уверенность.

## Пример использования

Откройте приложение в браузере, введите текст для анализа и нажмите "Анализировать". Результаты включают индивидуальные результаты каждого сервиса, сравнительную таблицу и выводы о согласованности.

## Требования к интерфейсу

Русскоязычный графический интерфейс с поддержкой различных разрешений экрана, вводом текста до 5000 символов, визуализацией результатов анализа и обработкой ошибок.  

## Технологический стек

| Компонент | Технология |
|-----------|-----------|
| Backend | Python 3.8+, Flask 3.0 |
| Frontend | HTML5, CSS3, JavaScript (ES6+) |
| UI Framework | Bootstrap 5.3 |
| API Клиент | huggingface_hub |
| Сервер | Gunicorn |

## Тестирование

Для тестирования API используйте скрипт `test_api.py`:

```bash
python test_api.py
```

## Развертывание на продакшене

### Использование Gunicorn

```bash
gunicorn -w 4 -b 0.0.0.0:5000 app:app
```

### Переменные окружения для продакшена

```bash
export FLASK_ENV=production
export FLASK_DEBUG=0
export HUGGINGFACE_API_KEY=your_key
export SECRET_KEY=your_secret_key
```

## Обработка ошибок

Приложение обрабатывает ошибки валидации, API, сети и парсинга.

## Лимитации

- Максимум 5000 символов на запрос
- Ограничения по запросам зависят от лимитов Hugging Face API
- Поддержка только текстовых входных данных

## Дополнительные ресурсы

- [Hugging Face Inference API](https://huggingface.co/docs/api-inference)
- [Hugging Face Models](https://huggingface.co/models)
- [Flask документация](https://flask.palletsprojects.com/)
- [Bootstrap 5](https://getbootstrap.com/)

## Автор
Оркин Родион Родионович
Группа: БПМ-22-ПО-3
Разработано как лабораторная работа №1 по дисциплине "Экспертные и рекомендательные системы" в НИТУ МИСиС, 2025 год.

## Лицензия

MIT License — см. файл LICENSE для деталей.

## Контакты

При возникновении вопросов обращайтесь к преподавателю курса.
